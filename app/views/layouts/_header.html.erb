<% if usuario_signed_in? %>
  Registrado como <%= current_usuario.nombre %>.
  <%= link_to "Editar perfil", edit_usuario_registration_path %>
  <%= link_to "Ver pedidos", pedidos_path %>
  <%= button_to "Desconectarse", destroy_usuario_session_path, method: :delete %>
<% else %>
  <%= link_to "Registrarse", new_usuario_registration_path %> o
  <%= link_to "Iniciar sesion", new_usuario_session_path %>
<% end %>
<%= link_to "Home", root_path %>
<!-- Navigation-->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container px-4 px-lg-5">
    <a class="navbar-brand" href="#!">Tienda</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
        <li class="nav-item"><%= link_to "Inicio", root_path, class: "nav-link" %> </li>
        <li class="nav-item"><%= link_to "Productos", productos_path, class: "nav-link active" %></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Shop</a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><%= link_to "Home", root_path, class: "dropdown-item" %></li>
            <li><hr class="dropdown-divider" /></li>
            <li><a class="dropdown-item" href="#!">Popular Items</a></li>
            <li><a class="dropdown-item" href="#!">New Arrivals</a></li>
          </ul>
        </li>
      </ul>
      <div class = "dropdown">
        <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-person-circle" style="font-size: 1.05rem;"></i></a>
        <div class="dropdown-menu">
            <% if usuario_signed_in? %>
            <p class="dropdown-item"> Â¡Bienvenido <%= current_usuario.nombre %>! </p>
              <%= link_to "Editar perfil", edit_usuario_registration_path, class: "dropdown-item" %>
              <%= link_to "Ver pedidos", pedidos_path, class: "dropdown-item" %>
              <%= button_to "Desconectarse", destroy_usuario_session_path, method: :delete, class: "dropdown-item btn btn-danger" %>
            <% else %>
              <%= form_for("usuario", :url => usuario_session_path, html: {class: 'px-2 py-3'}) do |f| %>
                <div class="form-group">
                  <%= f.label :email %>
                  <%= f.email_field :email, autofocus: true, autocomplete: "email", class: "form-control", placeholder: "Email" %>
                </div>
                <div class="form-group">
                  <%= f.label :password %>
                  <%= f.password_field :password, autocomplete: "current-password", class: "form-control", placeholder: "Password" %>
                </div>
                <div class="form-group">
                  <%= f.submit "Iniciar sesion", class: "btn btn-primary " %>
                </div>
              <% end %>
              <div class="dropdown-divider"></div>
              <%= link_to "Registrarse", new_usuario_registration_path, class: "dropdown-item" %>
            <% end %>
          </div>
        </div>
      </div>

      <% if usuario_signed_in? %>
        <%= button_to carrito_path(@current_carrito), method: :get, class: "btn btn-outline-dark" do %>
          <i class="bi-cart-fill me-1"></i>
          Carrito
          <span class="badge bg-dark text-white ms-1 rounded-pill"> <%= @current_carrito.linea_facturas.count %></span>
        <% end %>
      <% end %>
    </div>
  </div>
</nav>
<br>